### Kong Go Plugin Tests
### Use these requests to test the Go plugin functionality

### Variables
@host = localhost:8000
@admin = localhost:8001

### Test 1: Valid request with required headers
POST http://{{host}}/api/anything HTTP/1.1
Host: api.local
Content-Type: application/json

{
  "name": "Kong Go Plugin Test",
  "version": "1.0.0",
  "message": "Testing Go plugin validation"
}

### Test 2: Missing required header (should fail)
POST http://{{host}}/api/anything HTTP/1.1
Host: api.local

{
  "test": "missing content-type header"
}

### Test 3: Invalid HTTP method (should fail)
DELETE http://{{host}}/api/anything HTTP/1.1
Host: api.local
Content-Type: application/json

### Test 4: Valid GET request
GET http://{{host}}/api/anything HTTP/1.1
Host: api.local
Content-Type: application/json

### Test 5: Rate limit testing (run multiple times quickly)
POST http://{{host}}/api/anything HTTP/1.1
Host: api.local
Content-Type: application/json

{
  "rate_limit_test": true,
  "timestamp": "{{$timestamp}}"
}

### Admin API: Check plugin configuration
GET http://{{admin}}/services/test-service/plugins HTTP/1.1

### Admin API: Kong status
GET http://{{admin}}/status HTTP/1.1

### Admin API: Check services
GET http://{{admin}}/services HTTP/1.1

### Test with different content types
POST http://{{host}}/api/anything HTTP/1.1
Host: api.local
Content-Type: application/xml

<?xml version="1.0" encoding="UTF-8"?>
<test>
  <message>XML content test</message>
</test>

### Test with form data
POST http://{{host}}/api/anything HTTP/1.1
Host: api.local
Content-Type: application/x-www-form-urlencoded

name=Kong&version=3.4.0&plugin=go

### Large payload test
POST http://{{host}}/api/anything HTTP/1.1
Host: api.local
Content-Type: application/json

{
  "large_data": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
  "numbers": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  "nested": {
    "deep": {
      "very": {
        "deep": {
          "object": "test"
        }
      }
    }
  }
}
