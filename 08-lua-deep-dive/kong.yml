_format_version: "3.0"
_transform: true

services:
  - name: jsonplaceholder-api
    url: https://jsonplaceholder.typicode.com
    protocol: https
    host: jsonplaceholder.typicode.com
    port: 443
    path: /

routes:
  # Route com plugin de demonstração
  - name: demo-route
    service: jsonplaceholder-api
    protocols: [http, https]
    methods: [GET, POST]
    paths: [/demo]
    strip_path: true
    preserve_host: false

  # Route sem plugin para comparação
  - name: no-plugin-route
    service: jsonplaceholder-api
    protocols: [http, https]
    methods: [GET, POST]
    paths: [/no-plugin]
    strip_path: true
    preserve_host: false

plugins:
  # Plugin de demonstração Lua
  - name: lua-demo
    route: demo-route
    config:
      demo_mode: "performance"
      iterations: 5000
      enable_detailed_logs: true
      add_performance_headers: true
